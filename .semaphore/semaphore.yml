version: v1.0
name: Android example
agent:
  machine:
    type: e1-standard-4
    os_image: ubuntu1804
  containers:
    - name: main
      image: 'shr3jn/android-fastlane:jdk11'
blocks:
  - name: Build
    task:
      jobs:
        - name: Hello Android
          run:
            when: change_in('styles')
          commands:
            - checkout
            - './gradlew :core:assembleRelease'
      secrets:
        - name: package registry keys
